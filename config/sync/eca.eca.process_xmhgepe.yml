uuid: 67f3330e-ce9e-4867-bc74-29f08ab3502d
langcode: en
status: true
dependencies:
  config:
    - field.field.node.bid.field_bid_call
    - field.field.node.bid.field_bid_status
    - field.field.node.call.field_call_bids
    - field.field.node.call.field_call_status
    - field.storage.node.field_bid_call
    - field.storage.node.field_bid_status
    - field.storage.node.field_call_bids
    - field.storage.node.field_call_status
    - node.type.bid
  module:
    - eca_content
id: process_xmhgepe
modeller: bpmn_io
label: onBidUpdate
version: 1.0.0
weight: -10
events:
  Event_12gnwc0:
    plugin: 'content_entity:update'
    label: bidUpdated
    configuration:
      type: 'node bid'
    successors:
      -
        id: Gateway_1vy6ifb
        condition: Flow_0rytghh
conditions:
  Flow_0rytghh:
    plugin: eca_entity_field_value_changed
    configuration:
      negate: false
      field_name: field_bid_status
      entity: node
  Flow_1neru3k:
    plugin: eca_entity_field_value
    configuration:
      negate: false
      case: false
      expected_value: confirmed
      field_name: field_bid_status
      operator: equal
      type: value
      entity: node
gateways:
  Gateway_1vy6ifb:
    type: 0
    successors:
      -
        id: Activity_07c4rj7
        condition: Flow_1neru3k
actions:
  Activity_07c4rj7:
    plugin: eca_set_field_value
    label: setCallAttributed
    configuration:
      field_name: field_call_status
      field_value: attributed
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: 'node:field_bid_call'
    successors:
      -
        id: Activity_0dmljly
        condition: ''
  Activity_0dmljly:
    plugin: eca_get_field_value
    label: loadCallBids
    configuration:
      field_name: field_call_bids
      token_name: call_bids
      object: 'node:field_bid_call:field_call_bids'
    successors:
      -
        id: Activity_0btrdp0
        condition: ''
  Activity_0btrdp0:
    plugin: eca_list_remove_entity
    label: removeCurrentBid
    configuration:
      token_name: ''
      method: value
      index: ''
      list_token: call_bids
      object: node
    successors:
      -
        id: Activity_1xr40p7
        condition: ''
  Activity_1xr40p7:
    plugin: eca_set_field_value
    label: cancelBids
    configuration:
      field_name: field_bid_status
      field_value: rejected
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: call_bids
    successors: {  }
